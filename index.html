<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
    <style>
        #map {
            height: 600px;
            margin-top: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-logo">WildCan</a>
            <ul class="navbar-menu">
                <li class="navbar-item"><a href="index.html" class="navbar-link active">Home</a></li>
                <li class="navbar-item dropdown">
                <a href="about.html" class="navbar-link">About Us</a>
                <li class="navbar-item"><a href="donation.html" class="navbar-link">Donate</a></li>
            </ul>
        </div>
    </nav>

<div>

<a href="https://uwbc.ca/campaign/wildfires/" class="donate-button">Donate</a>
</div>
    <div class="content">
        <h1>Active Wildfires in British Columbia</h1>
        <div id="map"></div>
    </div>

    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoicnNhbmdleSIsImEiOiJjbTYybnd1Z2IxMjR3MmxvdThzMHRxejBjIn0.FHJ1aQP5xd0N0t5rg9F8oQ';

        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v11',
            center: [-127.6476, 53.7267],
            zoom: 6
        });

        const coordinates = [
            [-127.6476, 53.7267], 
            [-126.5, 54], 
            [-128, 53.5]
        ]; // Add your wildfire coordinates here

        // Add navigation controls
        map.addControl(new mapboxgl.NavigationControl());

        map.on('load', () => {
            // Define pulsing dot size
            const size = 100;

            // Create pulsing dot object
            const pulsingDot = {
                width: size,
                height: size,
                data: new Uint8Array(size * size * 4),
                onAdd: function () {
                    const canvas = document.createElement('canvas');
                    canvas.width = this.width;
                    canvas.height = this.height;
                    this.context = canvas.getContext('2d');
                },
                render: function () {
    const context = this.context;
    const radius = size / 2;
    const time = (performance.now() % 1000) / 1000;

    context.clearRect(0, 0, this.width, this.height);

    // Draw outer circle (reduce brightness by lowering alpha)
    context.beginPath();
    context.arc(radius, radius, radius * time, 0, Math.PI * 2);
    context.fillStyle = `rgba(255, 100, 100, ${(1 - time) * 0.5})`; // Reduced alpha
    context.fill();

    // Draw inner circle (reduce brightness by lowering alpha)
    context.beginPath();
    context.arc(radius, radius, radius * 0.4, 0, Math.PI * 2);
    context.fillStyle = 'rgba(255, 0, 0, 0.8)'; // Reduced alpha
    context.fill();

    this.data = context.getImageData(0, 0, this.width, this.height).data;
    map.triggerRepaint();

    return true;
                }
            };

            // Add pulsing dot image to map
            map.addImage('pulsing-dot', pulsingDot, { pixelRatio: 2 });

            // Add GeoJSON source for wildfires
            map.addSource('wildfires', {
                type: 'geojson',
                data: {
                    type: 'FeatureCollection',
                    features: coordinates.map(coord => ({
                        type: 'Feature',
                        geometry: { type: 'Point', coordinates: coord }
                    }))
                }
            });

            // Add layer to display pulsing dots
            map.addLayer({
                id: 'wildfire-layer',
                type: 'symbol',
                source: 'wildfires',
                layout: {
                    'icon-image': 'pulsing-dot',
                    'icon-allow-overlap': true
                }
            });
        });
    </script>
</body>
</html>
